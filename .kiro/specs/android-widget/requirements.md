# Requirements Document

## Introduction

QuickWorkTimeアプリにAndroidホーム画面ウィジェット機能を追加します。
主な機能としては、本日の勤怠時間の入力を主とします。
ユーザーがアプリを開かずにホーム画面から直接勤務時間(終了)の記録できるようになります。このウィジェットは既存のアプリ機能と連携し、データベースに保存された勤務情報を表示・更新できる機能を提供します。

## Requirements

### Requirement 1

**User Story:** ユーザーとして、ホーム画面にウィジェットを配置して、アプリを開かずに今日の勤務時間を入力・確認したい

#### Acceptance Criteria

1. WHEN ユーザーがホーム画面でウィジェット追加を選択 THEN システムはQuickWorkTimeウィジェットを選択肢として表示する
2. WHEN ユーザーがウィジェットをホーム画面に配置 THEN ウィジェットは今日の勤務終了時刻 を表示する
3. WHEN 勤務データが存在しない場合 THEN ウィジェットは「新規追加」状態にする
4. WHEN 勤務データが存在する場合 THEN ウィジェットは、本日日付の終了時間を表示する。

### Requirement 2

**User Story:** ユーザーとして、ウィジェットから直接、退勤の記録をしたい

#### Acceptance Criteria

1. WHEN ユーザーがウィジェットの「Exit」ボタンをタップ THEN システムは表示されている退勤時間で退勤記録を作成する
2. WHEN 退勤記録後にウィジェットを表示 THEN 記録された退勤時刻を表示する
3. WHEN 現在時刻が18:17の場合 THEN ウィジェットは18:15を表示する
4. WHEN 現在時刻が18:24の場合 THEN ウィジェットは18:20を表示する
5. WHEN 時間計算を行う場合 THEN システムは現在時刻を5分単位で切り下げて表示する

### Requirement 3

**User Story:** ユーザーとして、ウィジェットをタップしてアプリの詳細画面にアクセスしたい

#### Acceptance Criteria

1. WHEN ユーザーがウィジェットの時刻表示部分をタップ THEN システムはQuickWorkTimeアプリのメイン画面を開く
2. WHEN アプリが開かれた場合 THEN アプリは最新の勤務データを表示する

### Requirement 4

**User Story:** ユーザーとして、ウィジェットが常に最新の勤務情報を表示してほしい

#### Acceptance Criteria

1. WHEN アプリ内で勤務データが更新された場合 THEN ウィジェットは自動的に最新情報を反映する
2. WHEN 日付が変わった場合 THEN ウィジェットは新しい日付の勤務情報を表示する
3. WHEN システムが再起動された場合 THEN ウィジェットは正常に動作を継続する

### Requirement 5

**User Story:** ユーザーとして、ウィジェット上で退勤時間を調整したい

#### Acceptance Criteria

1. WHEN ユーザーが時刻の分部分を上にフリック THEN システムは表示時間を5分増加させる
2. WHEN ユーザーが時刻の分部分を下にフリック THEN システムは表示時間を5分減少させる
3. WHEN ユーザーが時刻の時部分を上にフリック THEN システムは表示時間を1時間増加させる
4. WHEN ユーザーが時刻の時部分を下にフリック THEN システムは表示時間を1時間減少させる
5. WHEN 時間調整後にExitボタンをタップ THEN システムは調整された時間で退勤記録を作成する

### Requirement 6

**User Story:** ユーザーとして、ウィジェットのデザインがアプリと統一されていてほしい

#### Acceptance Criteria

1. WHEN ウィジェットを表示 THEN ウィジェットはアプリのカラーテーマと一致したデザインを使用する
2. WHEN ダークモード/ライトモードが切り替わった場合 THEN ウィジェットは適切なテーマを適用する
3. WHEN ウィジェットのサイズが変更された場合 THEN レイアウトは適切にリサイズされる